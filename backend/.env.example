# Database Configuration
DATABASE_URL=postgresql://user:password@localhost:5432/rabbithole_db

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379

# Server Configuration
PORT=4000
NODE_ENV=development

# Ollama Configuration for AI Assistant (Local LLM)
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2
AI_MAX_TOKENS=1000
AI_TEMPERATURE=0.7

# Ollama Conversational AI Configuration
OLLAMA_CHAT_MODEL=deepseek-r1:1.5b
OLLAMA_EMBEDDING_MODEL=nomic-embed-text
MAX_CONTEXT_MESSAGES=20
MAX_RELEVANT_NODES=5
SIMILARITY_THRESHOLD=0.7

# Authentication (if implemented)
JWT_SECRET=your-jwt-secret-here
JWT_EXPIRATION=7d

# Logging
LOG_LEVEL=info

# File Storage Configuration
# Options: local, s3, cloudflare_r2
STORAGE_PROVIDER=local

# Local Storage (when STORAGE_PROVIDER=local)
LOCAL_STORAGE_PATH=./uploads

# AWS S3 Configuration (when STORAGE_PROVIDER=s3)
S3_BUCKET=rabbithole-evidence
S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key

# Cloudflare R2 Configuration (when STORAGE_PROVIDER=cloudflare_r2)
R2_ACCOUNT_ID=your_r2_account_id
R2_BUCKET=rabbithole-evidence
R2_ACCESS_KEY_ID=your_r2_access_key
R2_SECRET_ACCESS_KEY=your_r2_secret_key

# File Upload Limits
MAX_FILE_SIZE=104857600  # 100MB in bytes

# RabbitMQ Configuration for Vectorization Pipeline
RABBITMQ_URL=amqp://localhost
VECTORIZATION_QUEUE_NAME=vectorization_jobs
RABBITMQ_MAX_RETRIES=10
RABBITMQ_RETRY_DELAY_MS=3000
RABBITMQ_MAX_RETRY_DELAY_MS=30000

# OpenAI Configuration for Embeddings
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
OPENAI_MAX_RETRIES=3
OPENAI_TIMEOUT=30000

# Media Processing Services
DOCLING_URL=http://docling:5001
DOCLING_TIMEOUT=60000
DOCLING_ENABLED=true
MEDIA_QUEUE_NAME=media_processing_queue

# Audio Transcription Configuration
# OpenAI Whisper API is used for transcription
# Set OPENAI_API_KEY above to enable
USE_LOCAL_WHISPER=false                        # Use local Whisper installation instead of API
WHISPER_MODEL=whisper-1                         # OpenAI Whisper model
MAX_AUDIO_FILE_SIZE_MB=25                       # Maximum audio file size (OpenAI limit: 25MB)
AUDIO_PROCESSING_TIMEOUT_MS=300000              # 5 minutes timeout

# Speaker Diarization (optional - requires AssemblyAI)
ENABLE_SPEAKER_DIARIZATION=false                # Enable speaker diarization
ASSEMBLYAI_API_KEY=your_assemblyai_api_key     # AssemblyAI API key for diarization

# Video Processing Configuration
# Requires ffmpeg installed in the container
FFMPEG_PATH=ffmpeg                              # Path to ffmpeg binary
FFPROBE_PATH=ffprobe                            # Path to ffprobe binary
ENABLE_VIDEO_ANALYSIS=true                      # Enable video analysis features
VIDEO_FRAME_RATE=1                              # Frames to extract per second (1 fps)
VIDEO_MAX_FRAMES=300                            # Maximum frames to extract per video
VIDEO_PROCESSING_TIMEOUT_MS=600000              # 10 minutes timeout

# Video Analysis Features (requires TensorFlow & OpenCV)
ENABLE_OBJECT_DETECTION=true                    # Enable object detection in video frames
ENABLE_OCR=false                                # Enable OCR for text in video (resource intensive)
TENSORFLOW_MODEL=coco-ssd                       # TensorFlow model for object detection
SCENE_DETECTION_THRESHOLD=30.0                  # Threshold for scene change detection (histogram diff)

# Redis URL (alternative to host/port)
REDIS_URL=redis://redis:6379

# Database Configuration (for tests)
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/rabbithole_test
DATABASE_MAX_CONNECTIONS=20

# File Upload Configuration
UPLOAD_DIR=/uploads
ALLOWED_FILE_TYPES=["pdf","docx","txt","md","jpg","png","mp3","mp4"]

# Authentication Tokens
JWT_EXPIRES_IN=7d
REFRESH_TOKEN_EXPIRES_IN=30d

# AI Features Toggle
AI_ENABLED=true
